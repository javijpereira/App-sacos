<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Acceso · Control de Sacos</title>

<style>
* {
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: #0f172a;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #e5e7eb;
}

/* Contenedor principal */
.auth-container {
  width: 100%;
  padding: 1rem;
  display: flex;
  justify-content: center;
}

/* Tarjeta */
.auth-card {
  width: 100%;
  max-width: 400px;
  background: #020617;
  padding: 2.5rem 2rem;
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Cabecera centrada */
.auth-header {
  text-align: center;
  margin-bottom: 2rem;
}

.auth-header .logo {
  width: 3000px;
  height: 300px;
  object-fit: contain;
  margin-bottom: 1rem;
}

.auth-header h1 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #f1f5f9;
}

/* Inputs modernos */
.auth-card input {
  width: 100%;
  padding: 0.9rem 1rem;
  margin-bottom: 1rem;
  border-radius: 12px;
  border: none;
  outline: none;
  background: #1e293b;
  color: #f1f5f9;
  font-size: 1rem;
  transition: all 0.3s;
}

.auth-card input:focus {
  background: #2e3a55;
  box-shadow: 0 0 0 3px rgba(37,99,235,0.3);
}

/* Botones modernos */
.auth-card button {
  width: 100%;
  padding: 0.9rem;
  margin-top: 0.5rem;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  font-size: 1rem;
  transition: all 0.3s;
}

.auth-card button#login {
  background: #2563eb;
  color: white;
}

.auth-card button#login:hover {
  background: #1e40af;
}

.auth-card button.secondary {
  background: transparent;
  color: #93c5fd;
  border: 2px solid #2563eb;
}

.auth-card button.secondary:hover {
  background: #2563eb;
  color: white;
}

/* Mensajes */
#msg {
  margin-top: 1rem;
  text-align: center;
  font-size: 0.9rem;
}


</style>
</head>

<body>
  <div class="auth-container">
    <div class="auth-card">
      
      <!-- Cabecera centrada -->
      <div class="auth-header">
        <img src="img/sacospellet.jpg" alt="Pellets" class="logo">
        <h1>Control de Sacos de Pellets</h1>
      </div>

      <!-- Formulario -->
      <input type="email" id="email" placeholder="Correo electrónico">
      <input type="password" id="password" placeholder="Contraseña">

      <button id="login">Entrar</button>
      <button id="register" class="secondary">Crear cuenta</button>

      <p id="msg"></p>
    </div>
  </div>
</body>


<script type="module">
/* ================= FIREBASE ================= */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import {
  getAuth,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

import {
  getFirestore,
  setDoc,
  doc,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAM4pMCb1rPcZ_q-ncOMp4C8p9VTrt-qLc",
  authDomain: "sacos-pellet.firebaseapp.com",
  projectId: "sacos-pellet",
  storageBucket: "sacos-pellet.firebasestorage.app",
  messagingSenderId: "215063841201",
  appId: "1:215063841201:web:c36979a5ac466d3e061590"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* ================= ELEMENTOS ================= */
const email = document.getElementById("email");
const password = document.getElementById("password");
const msg = document.getElementById("msg");

/* ================= LOGIN ================= */
document.getElementById("login").onclick = async () => {
  msg.textContent = "";

  try{
    await signInWithEmailAndPassword(auth, email.value, password.value);
    location.href = "app.html";
  }catch(err){
    msg.textContent = "Email o contraseña incorrectos";
  }
};

/* ================= REGISTRO ================= */
document.getElementById("register").onclick = async () => {
  msg.textContent = "";

  if(!email.value || !password.value){
    msg.textContent = "Completa todos los campos";
    return;
  }

  try{
    const cred = await createUserWithEmailAndPassword(
      auth,
      email.value,
      password.value
    );

    await setDoc(doc(db,"usuarios",cred.user.uid),{
      email: cred.user.email,
      role: "pendiente",
      creado: serverTimestamp()
    });

    msg.textContent = "Solicitud enviada. Pendiente de aprobación.";
  }catch(err){
    msg.textContent = err.message;
  }
};
</script>

</html>




